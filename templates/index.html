{% extends 'headerandfooter.html' %}
{% load static %}
{% block content %}
  <style>
    .carousel-img-1 {
      background-image: url('/static/assets/images/banner_1.jpg');
    }
    .carousel-img-2 {
      background-image: url('/static/assets/images/banner_2.jpg');
    }
    .carousel-img-3 {
      background-image: url('/static/assets/images/banner_3.jpg');
    }
    
    .carosel-images {
        position: relative;
        height: 37vh;
        background-position: center;
        background-size: cover;
        background-repeat: no-repeat;
    }
    
    .carosel-images::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.3);
        z-index: 1; /* Overlay layer */
    }
    
    .carousel-text {
        position: relative;
        z-index: 2; /* Text layer above overlay */
        display: flex;
        flex-direction: column;
        justify-content: center;
        height: 37vh;
        align-items: center;
        color: white;
        filter: none;
    }
  </style>

  <div id="carouselExampleInterval" class="carousel slide carousel-marigin" data-bs-ride="carousel">
    <div class="carousel-inner">
      <div class="carousel-item carosel-images active carousel-img-1" data-bs-interval="3000">
        <div class="carousel-text">
          <h2>Discover Your Next Adventure</h2>
          <p style="font-weight: 600;font-family: Georgia, 'Times New Roman', Times, serif;">Explore our vast collection of genres and find a story that speaks to you.</p>
        </div>
        {% comment %} <img src="{% static 'assets/images/banner_1.png' %}" class="d-block w-100" alt="..." /> {% endcomment %}
      </div>
      <div class="carousel-item carosel-images carousel-img-2" data-bs-interval="3000">
        <div class="carousel-text">
          <h2>Uncover Hidden Gems</h2>
          <p>From classics to contemporary reads, dive into the books everyoneâ€™s talking about.</p>
        </div>

        {% comment %} <img src="{% static 'assets/images/banner_2.png' %}" class="d-block w-100" alt="..." /> {% endcomment %}
      </div>
      <div class="carousel-item carosel-images carousel-img-3" data-bs-interval="3000">
        <div class="carousel-text">
          <h2>Books for Every Mood</h2>
          <p>Whether you're seeking inspiration or relaxation, find the perfect read to match your mood.</p>
        </div>

        {% comment %} <img src="{% static 'assets/images/banner_3.png' %}" class="d-block w-100" alt="..." /> {% endcomment %}
      </div>
    </div>

  </div>

  <style>
    .card-container-home {
      display: flex;
      overflow-x: auto;
      scroll-behavior: smooth;
      scrollbar-width: none;
      scroll-snap-type: x mandatory;
      margin: 0px 30px;
    }
    
    .every-card-home {
      flex-shrink: 0;
      cursor: pointer;
    }
    
    .card-text {
      display: -webkit-box;
      -webkit-line-clamp: 1; /* Limits text to 4 lines */
      -webkit-box-orient: vertical;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .card-main {
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .every-card-home {
      width: 14rem;
      border: none;
      transition: ease 0.3s;
    }
    
    .every-card-home:hover {
      transform: translateY(-6px);
      box-shadow: 0 2px 12px rgba(0, 0, 0, 0.07), 0 -2px 12px rgba(0, 0, 0, 0.07), 2px 0 12px rgba(0, 0, 0, 0.07), -2px 0 12px rgba(0, 0, 0, 0.07);
    }
    .card-body {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-bottom: 12px;
    }
    
    .card-text {
      margin: 0;
    }
    
    .index-headings {
      position: relative;
    }

    .wishlist-icon{
      text-decoration: none;
      font-size: 1.6em;
    }

    {% comment %} .index-headings::before {
      content: '';
      top: 40px;
      background-color: black;
      height: 2px;
      position: absolute;
      width: 450px;
      left: 0;
    } {% endcomment %}
    
    @media (max-width: 1560px) {
      .card-container-home {
      }
    }
    
    @media (max-width: 1297px) {
      .card-container-home {
        margin: 0px 25px;
      }
    }
    
    @media (max-width: 1047px) {
      .card-container-home {
        margin: 0px 17px;
      }
    }
    
    @media (max-width: 768px) {
      .card-container-home {
        margin: 0px 15px;
      }
    
      .every-card-home {
        width: 12.1rem;
      }
      .index-headings {
        margin-top: 20px !important;
        font-size: 1.5em !important;
        margin-left: 15px !important;
      }
    
      .index-headings::before {
        width: 250px;
        top: 30px;
      }
      .card-main {
        margin-top: 20px !important;
      }
    }
    
    @media (max-width: 671px) {
      .card-container-home {
        margin: 0px 10px;
      }
    
      .card .card-body h5 {
        font-size: 0.91em;
      }
      .card .card-body p {
        font-size: 0.9em;
      }
    
      .every-card-home {
        width: 15rem;
      }
    }
    
    @media (max-width: 550px) {
      .card-container-home {
        margin: 0px;
      }
      .every-card-home {
        width: 10rem;
      }
    
      .card-body {
        margin-bottom: 0px;
      }
      .card-text {
        margin: 3px;
      }
      .card-img-top {
        margin-bottom: 3px;
      }
    }
    @media (max-width: 388px) {
      .every-card-home {
        width: 8.5rem;
        margin: 9px !important;
      }
    }
  </style>
  <div class="index-container ">
    <div class="justfy-content-start">
        <h4 class="index-headings mt-5 ms-5" style="font-size: 1.6em;">Besst Sellers 
          {% comment %} <span style="font-size: 0.7em;cursor: pointer;"><a style="text-decoration: none;color: skyblue;" href="">(view all)</a></span> {% endcomment %}
        </h4>
      </div>
    
      <div class="mt-4 mb-5 card-main">
        <div class="card-container-home">
          {% for book in bestsellers %}
              <div class="card position-relative every-card-home" style="margin-left: 12px;margin-right: 12px;">
                <a href="{% url 'details' book.openlibrary_id %}" target="_blank"><img loading="lazy" src="https://covers.openlibrary.org/b/id/{{ book.cover_id }}-L.jpg" class="card-img-top mb-3" alt="..." /></a>
                <div class="card-body ms-3" style="padding: 0;">
                  <h5 class="card-title">{{ book.title }}</h5>
                  <p class="card-text">{{ book.author }}</p>
                </div>
                <div class="icon-container position-absolute pe-2" style="right: 20px; top: 20px;">
                  {% if user.is_authenticated %}
                  <a href="javascript:void(0);" class="wishlist-icon" onclick="toggleWishlist('{{ book.openlibrary_key }}', '{{ book.title }}', '{{ book.author }}', {{ book.cover_id }})">
                    <i id="wishlist-icon-{{ book.openlibrary_key }}" class="fa fa-heart" style="color: {% if book.in_wishlist %}red{% else %}gray{% endif %};"></i>
                </a>
                {% else %}
                  <a href="javascript:void(0);" class="wishlist-icon" onclick="toggleLogin()">
                    <i id="wishlist-icon-" class="fa fa-heart" style="color: gray;"></i>
                </a>
                {% endif %}
                </div>
              </div>
          {% endfor %} 
        </div>
      </div>


      <div class="justfy-content-start">
        <h4 class="mt-5 ms-5 index-headings" style="font-size: 1.6em;">Browse Genres 
          {% comment %} <span style="font-size: 0.7em;cursor: pointer;"><a style="text-decoration: none;color: skyblue;" href="">(view all)</a></span> {% endcomment %}
        </h4>
      </div>
    
      <style>
        .genre-outer {
          display: grid;
          grid-template-columns: 1fr 1fr 1fr 1fr;
          gap: 30px;
          margin: 40px;
        }
        .genre-single {
          height: 200px;
          width: 100%;
          display: flex;
          justify-content: center;
          align-items: center;
          box-shadow: 0 4px 4px rgba(0, 0, 0, 0.4);
          background-position: center;
          background-size: cover;
          background-repeat: no-repeat;
          transition: ease 0.4s;
          cursor: pointer;
        }
        .genre-single:hover {
          transform: translateY(-10px);
        }
        
        .genre-single .genre-text {
          background-color: rgba(0, 0, 0, 0.3);
          color: white;
          font-weight: 600;
          height: 50px;
          width: 100%;
          display: flex;
          justify-content: center;
          align-items: center;
          text-decoration: none;
        }
        .genre-single .genre-text p {
          margin: 0;
        }
        .genre-outer a {
          text-decoration: none;
        }
        @media (max-width: 1200px) {
          .genre-outer {
            grid-template-columns: 1fr 1fr 1fr;
          }
        }
        @media (max-width: 768px) {
          .genre-outer {
            grid-template-columns: 1fr 1fr;
            margin: 30px;
          }
        }
        @media (max-width: 550px) {
          .genre-outer {
            grid-template-columns: 1fr;
            margin: 14px;
          }
          .genre-single {
            height: 200px;
          }
        }
      </style>
    
      <div class="mt-5 genre-main-container">
        <dive class="genre-outer">
          <a href="{% url 'filterlist' genre="Romance" %}">
            <div class="genre-single" style="background-image: url('/static/assets/images/genre-1.webp');">
              <div class="genre-text">
                <p>ROMANCE</p>
              </div>
            </div>
          </a>
          <a href="{% url 'filterlist' genre="Horror" %}">
            <div class="genre-single" style="background-image: url('/static/assets/images/genre-2.webp');">
              <div class="genre-text">
                <p>HORROR</p>
              </div>
            </div>
          </a>
          <a href="{% url 'filterlist' genre="Adventure" %}">
            <div class="genre-single" style="background-image: url('/static/assets/images/genre-3.webp');">
              <div class="genre-text">
                <p>ADVENTURE</p>
              </div>
            </div>
          </a>
          <a href="{% url 'filterlist' genre="Comics" %}">
            <div class="genre-single" style="background-image: url('/static/assets/images/genre-4.webp');">
              <div class="genre-text">
                <p>COMICS</p>
              </div>
            </div>
          </a>
          <a href="{% url 'filterlist' genre="Drama" %}">
            <div class="genre-single" style="background-image: url('/static/assets/images/genre-5.webp');">
              <div class="genre-text">
                <p>DRAMA</p>
              </div>
            </div>
          </a>
          <a href="{% url 'filterlist' genre="Nature" %}">
            <div class="genre-single" style="background-image: url('/static/assets/images/genre-6.webp');">
              <div class="genre-text">
                <p>NATURE</p>
              </div>
            </div>
          </a>
          <a href="{% url 'filterlist' genre="Mystery" %}">
            <div class="genre-single" style="background-image: url('/static/assets/images/genre-7.webp');">
              <div class="genre-text">
                <p>MISTERY</p>
              </div>
            </div>
          </a>
          <a href="{% url 'filterlist' genre="History" %}">
            <div class="genre-single" style="background-image: url('/static/assets/images/genre-8.webp');">
              <div class="genre-text">
                <p>HISTORY</p>
              </div>
            </div>
          </a>
          <a href="{% url 'filterlist' genre="Fantasy" %}">
            <div class="genre-single" style="background-image: url('/static/assets/images/genre-9.webp');">
              <div class="genre-text">
                <p>FANTASY</p>
              </div>
            </div>
          </a>
          <a href="{% url 'filterlist' genre="Biography" %}">
            <div class="genre-single" style="background-image: url('/static/assets/images/genre-10.webp');">
              <div class="genre-text">
                <p>BIOGRAPHIES</p>
              </div>
            </div>
          </a>
          <a href="{% url 'filterlist' genre="Nonfiction" %}">
            <div class="genre-single" style="background-image: url('/static/assets/images/genre-11.webp');">
              <div class="genre-text">
                <p>NON FICTION</p>
              </div>
            </div>
          </a>
          <a href="{% url 'filterlist' genre="Fiction" %}">
            <div class="genre-single" style="background-image: url('/static/assets/images/genre-12.webp');">
              <div class="genre-text">
                <p>FICTION</p>
              </div>
            </div>
          </a>
        </dive>
      </div>
    
      <div class="justfy-content-start">
        <h4 class="mt-5 ms-5 index-headings" style="font-size: 1.6em;">First Edition 
          {% comment %} <span style="font-size: 0.7em;cursor: pointer;"><a style="text-decoration: none;color: skyblue;" href="">(view all)</a></span> {% endcomment %}
        </h4>
      </div>
    
      <div class="mt-4 mb-5 card-main">
        <div class="card-container-home">
          {% for book in first_edition %}
              <div class="card position-relative every-card-home" style="margin-left: 12px;margin-right: 12px;">
                <a href="{% url 'details' book.openlibrary_id %}" target="_blank"><img src="https://covers.openlibrary.org/b/id/{{ book.cover_id }}-L.jpg" class="card-img-top mb-3" alt="..." /></a>
                <div class="card-body ms-3" style="padding: 0;">
                  <h5 class="card-title">{{ book.title }}</h5>
                  <p class="card-text">{{ book.author }}</p>
                </div>
                <div class="icon-container position-absolute pe-2" style="right: 20px; top: 20px;">
                  {% if user.is_authenticated %}
                  <a href="javascript:void(0);" class="wishlist-icon" onclick="toggleWishlist('{{ book.openlibrary_key }}', '{{ book.title }}', '{{ book.author }}', {{ book.cover_id }})">
                    <i id="wishlist-icon-{{ book.openlibrary_key }}" class="fa fa-heart" style="color: {% if book.in_wishlist %}red{% else %}gray{% endif %};"></i>
                </a>
                {% else %}
                  <a href="javascript:void(0);" class="wishlist-icon" onclick="toggleLogin()">
                    <i id="wishlist-icon-" class="fa fa-heart" style="color: gray;"></i>
                </a>
                {% endif %}
                </div>
              </div>
          {% endfor %} 
        </div>
      </div>
    
      <div class="justfy-content-start">
        <h4 class="mt-5 ms-5 index-headings" style="font-size: 1.6em;">Award Winning 
          {% comment %} <span style="font-size: 0.7em;cursor: pointer;"><a style="text-decoration: none;color: skyblue;" href="">(view all)</a></span> {% endcomment %}
        </h4>
      </div>
    
      <div class="mt-4 card-main">
        <div class="card-container-home">
          {% for book in award_winning %}
              <div class="card position-relative every-card-home" style="margin-left: 12px;margin-right: 12px;">
                <a href="{% url 'details' book.openlibrary_id %}" target="_blank"><img src="https://covers.openlibrary.org/b/id/{{ book.cover_id }}-L.jpg" class="card-img-top mb-3" alt="..." /></a>
                <div class="card-body ms-3" style="padding: 0;">
                  <h5 class="card-title">{{ book.title }}</h5>
                  <p class="card-text">{{ book.author }}</p>
                </div>
                <div class="icon-container position-absolute pe-2" style="right: 20px; top: 20px;">
                  {% if user.is_authenticated %}
                  <a href="javascript:void(0);" class="wishlist-icon" onclick="toggleWishlist('{{ book.openlibrary_key }}', '{{ book.title }}', '{{ book.author }}', {{ book.cover_id }})">
                    <i id="wishlist-icon-{{ book.openlibrary_key }}" class="fa fa-heart" style="color: {% if book.in_wishlist %}red{% else %}gray{% endif %};"></i>
                </a>
                {% else %}
                  <a href="javascript:void(0);" class="wishlist-icon" onclick="toggleLogin()">
                    <i id="wishlist-icon-" class="fa fa-heart" style="color: gray;"></i>
                </a>
                {% endif %}
                </div>
              </div>
          {% endfor %}
        </div>
      </div>
    
      <div class="justfy-content-start d-flex">
        <h4 class="mt-5 ms-5 index-headings" style="font-size: 1.6em;">Young Adult
          {% comment %} <span style="font-size: 0.7em;cursor: pointer;"><a style="text-decoration: none;color: skyblue;" href="">(view all)</a></span> {% endcomment %}
        </h4>
      </div>
    
      <div class="mt-4 mb-5 card-main">
        <div class="card-container-home">
          {% for book in young_adults %}
              <div class="card position-relative every-card-home" style="margin-left: 12px;margin-right: 12px;">
                <a href="{% url 'details' book.openlibrary_id %}" target="_blank"><img src="https://covers.openlibrary.org/b/id/{{ book.cover_id }}-L.jpg" class="card-img-top mb-3" alt="..." /></a>
                <div class="card-body ms-3" style="padding: 0;">
                  <h5 class="card-title">{{ book.title }}</h5>
                  <p class="card-text">{{ book.author }}</p>
                </div>
                <div class="icon-container position-absolute pe-2" style="right: 20px; top: 20px;">
                  {% if user.is_authenticated %}
                  <a href="javascript:void(0);" class="wishlist-icon" onclick="toggleWishlist('{{ book.openlibrary_key }}', '{{ book.title }}', '{{ book.author }}', {{ book.cover_id }})">
                    <i id="wishlist-icon-{{ book.openlibrary_key }}" class="fa fa-heart" style="color: {% if book.in_wishlist %}red{% else %}gray{% endif %};"></i>
                </a>
                {% else %}
                  <a href="javascript:void(0);" class="wishlist-icon" onclick="toggleLogin()">
                    <i id="wishlist-icon-" class="fa fa-heart" style="color: gray;"></i>
                </a>
                {% endif %}
                </div>
              </div>
          {% endfor %} 
        </div>
      </div>
  </div>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  {% comment %} <script>
    const csrftoken = '{{ csrftoken }}';
    function toggleWishlist(booktId){
      $.ajax({
        url:"{% url 'wishlist_toggle' %}",
        type:"POST",
        data:{
            'book_id':booktId,
            'csrfmiddlewaretoken':csrftoken
        },
        success:function(response){
          const icon = document.getElementById(`wishlist-icon-${booktId}`);
          if (response.added){
            icon.style.color = "red"
          }
          else{
            icon.style.color = "gray"
          }
        },
      });
    }
  </script> {% endcomment %}

{% endblock %}
